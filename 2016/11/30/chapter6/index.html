<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="描述">
    

    <!--Author-->
    
        <meta name="author" content="AlexarJING">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="第6章 动画与音效"/>
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="描述" />
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Alexar的Love2d实战教程"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>第6章 动画与音效 - Alexar的Love2d实战教程</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about.html">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact.html">
                    Contact
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
    </div>
    <script>
		(function(){
		    var bp = document.createElement('script');
		    var curProtocol = window.location.protocol.split(':')[0];
		    if (curProtocol === 'https') {
		        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
		    }
		    else {
		        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
		    }
		    var s = document.getElementsByTagName("script")[0];
		    s.parentNode.insertBefore(bp, s);
		})();
	</script>

</header>

        <section class="main">
            
<div class="post">

    <div class="post-header">
        <h1 class="title">
            <a href="/2016/11/30/chapter6/">
                第6章 动画与音效
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2016-11-30</span>
            
            <a href="#disqus_thread" class="comments">评论</a>
            
                <span class="category">
                    <a href="/categories/初级教程/">初级教程</a>
                </span>
            
        </div>
    </div>

    <div class="content">

        <!-- Gallery -->
        

        <!-- Post Content -->
        <p>本章内容：通过之前几章的学习，我们学到了大多数游戏所需的东西，你现在完全可以做一些小游戏了。比如FC游戏小蜜蜂（Galaxian）。或者坦克大战等等。但是，现在还不太好玩，因为画面比较生硬，而且没有声音，现在，我们就开始介绍如何做出动画效果及播放声音。<br><a id="more"></a></p>
<h1 id="动画与音效"><a href="#动画与音效" class="headerlink" title="动画与音效"></a>动画与音效</h1><h2 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h2><p>动画能够很好的提高画面的可视性，当然，动画不单单是一个单纯的贴图替换的过程，也可能包含图片颜色的改变，位置的改变，形状的改变等等。就平时常用的而言，动画分为下面几种：帧动画，骨骼动画，粒子效果，mesh变形等等。他们并没有一个完全严格意义的概念划分，只是我们在使用时的人为划分。</p>
<h3 id="帧动画"><a href="#帧动画" class="headerlink" title="帧动画"></a>帧动画</h3><p>帧动画是2d游戏中最常用的动画形式，因为它简单易用，基本不涉及什么计算，画面表现丰富。当然，它也有相应的缺点，比如贴图占据空间大，越流畅、精细的画面，占据内存空间越大，绘制比较麻烦，因为每一帧几乎等于重绘。<br>帧动画还有一种变体，是将动画的各个部分划分为小的动画，比如头部，手臂等，然后把他们通过固定的位置拼接在一起。这种好处是可以替换某个部分来实现换装备，换武器或者一个类型的动画可以组装多种人物等等。</p>
<h3 id="骨骼动画"><a href="#骨骼动画" class="headerlink" title="骨骼动画"></a>骨骼动画</h3><p>骨骼动画是比较复杂的动画，但是它有很多优点，比如可以复用贴图，不用画很多帧，方便控制，可以结合mesh动画等。目前比较流行的有spine和dragonbone两个骨骼动画编辑器。其中spine有对应love2d的运行时，所以一般使用骨骼动画都用spine，不过spine本身是收费的，而且不便宜。骨骼动画的原理是将一个人物分为若干块骨头，我们主要控制骨头的长短，角度，位置等，然后骨头上绑定贴图，就可以了，所以最简单的骨骼动画记录的是随时间变化各个骨骼的位置和角度。<br>刚刚提到的帧动画变体实际上有时也可以加入骨骼动画，只不过一般不太设计关节角度的继承关系，而是直接用绝对位置和绝对角度。因为他们的编辑比较复杂，或者没有一个统一的定式，这里不多讲，后面可以针对性的自己试着实现。</p>
<h3 id="粒子效果"><a href="#粒子效果" class="headerlink" title="粒子效果"></a>粒子效果</h3><p>实际上，粒子效果本身不太算动画部分，但是因为他们也涉及贴图，位置，角度，大小等的变化，所以放在这里将。粒子效果实际上是一大批的小图片，按照预先设计好的存在时间，位置，速度，角度，加速度，颜色等等（很多有随机成分），加入到场景，并当存在时间到时时自动消失。我们常用见的比如，魔法效果，火星，灰尘，闪光，火焰等，均可由粒子效果来模拟。对了，加一句计算机图形的名言“这个东西看起来是真的，那它就是真的”。</p>
<h3 id="mesh动画"><a href="#mesh动画" class="headerlink" title="mesh动画"></a>mesh动画</h3><p>也可以叫做mesh的动态形变。如果知道些绘图原理或者3d渲染的同学，应该理解什么是mesh，它是计算机渲染图片的形式，计算机会把欲绘制的位置与纹理的位置做一个对应关系，一般至少要3个点来完成。一个方形的贴图一般需要4个点，即两个三角形来完成渲染。而mesh动画则是把一个贴图布满mesh网格，每个单元都是三角形。然后通过控制这些单元的顶点位置来达到变形效果。这种变形往往比较有张力，而且立体。比如一个软球，一个飘动的旗子，一些透视形变等等。这种效果一般也会结合骨骼动画来实现，比如spine。所以有时，spine能做出以假乱真的3d效果。</p>
<p>本章仅具体介绍一下帧动画的原理和库，骨骼动画可以到spine的运行时的github上找到案例（去找一个叫love2d的branch），粒子效果可以找一些粒子工具来体验一下感觉，其实所有的参数都是通用的。mesh动画就还是找spine运行时。</p>
<h2 id="帧动画原理及实现。"><a href="#帧动画原理及实现。" class="headerlink" title="帧动画原理及实现。"></a>帧动画原理及实现。</h2><h3 id="基本原理"><a href="#基本原理" class="headerlink" title="基本原理"></a>基本原理</h3><p>帧动画的基本远离实际上跟电影胶片差不多，就是利用人的视觉残像原理，以及人脑自动补全的原理的，通过快速的切换一些画面的显示来达到某个图片看起来像在动一样。<br>帧动画一般涉及几个要素，一个是帧序列，就是一组图片。一个是延迟时间，帧与帧之间的延迟间隔。还有一个是循环模式，比如单次，顺序循环，乒乓循环几种。</p>
<h3 id="多图帧动画"><a href="#多图帧动画" class="headerlink" title="多图帧动画"></a>多图帧动画</h3><p>多图是比较简单的方式，每个图片是已经切割好的纹理，我们按正常的方法建立一组image对象，然后通过一个timer来控制播放即可。下面通过代码演示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">local images = &#123;&#125;</div><div class="line">local cd = 1/20</div><div class="line">local timer = cd</div><div class="line">local index = 1</div><div class="line">for i = 1, 10 do</div><div class="line">	images[i] =  love.graphics.newImage(&quot;res/image&quot;..i..&quot;.png&quot;)</div><div class="line">end</div><div class="line"></div><div class="line">function Animation_update(dt)</div><div class="line">	timer = timer - dt</div><div class="line">	if timer&lt;0 then</div><div class="line">		timer = cd</div><div class="line">		index = index + 1 </div><div class="line">		if index&gt;#images then</div><div class="line">			index = 1</div><div class="line">		end</div><div class="line">	end</div><div class="line">end</div><div class="line"></div><div class="line">function Animation_draw()</div><div class="line">	love.graphics.draw(images[index])</div><div class="line">end</div></pre></td></tr></table></figure></p>
<p>上面的代码比较简单，唯一需要注意的是引入image对象时，对文件名的处理，可以用string.format进行格式化。</p>
<h3 id="spritesheet帧动画"><a href="#spritesheet帧动画" class="headerlink" title="spritesheet帧动画"></a>spritesheet帧动画</h3><p>精灵表帧动画的原理实际跟上面是没有区别的，只是由于如果图片不是二次幂（自己百度）的话，它实际占用的显存要高于图片本身。所以一般把图片整理后放到一个大图片中，这个图片叫做精灵清单，压制这种图片的工具比较多，比较著名的是spritepacker，额，也是个收费工具。在love论坛中有对其文件格式解读的工具，由于笔者并不用这个软件，所以请自行查阅。另外，在网上还有很多并没有给出具体拆分方式的精灵清单。如果他们的间隔是固定的，(比如一些人做的是64*64大小，每个精灵之间再额外间隔2个像素),这种就比较容易处理。不过有素材，可能是从某些游戏导出的，原本是存在一个清单的，但是导出时没能找到，这种情况就需要手动切图，在重新排布了。常用的有比如photoshop,graphicgale等。<br>从代码实现上，与上面的代码的区别在于需要引入love的另一个对象叫做quad。它可以用来作为draw的第二个参数，从而告诉draw函数要绘制目标的哪个矩形区域。<br>quad在定义时，需要x,y,w,h参数，另外还需要一个图片整体大小。需要说明的是，像素的起点是0，0 而非1，1 所以宽100，高100的图片，实际x的取值范围是0,99。<br>所以有下面代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">local image = love.graphics.newImage(&quot;res/imagesheet.png&quot;)</div><div class="line">local imageW,imageH = image:getDimensions()</div><div class="line">local cd = 1/20</div><div class="line">local timer = cd</div><div class="line">local index = 1</div><div class="line">local frames = &#123;&#125;</div><div class="line">for i = 1, 10 do</div><div class="line">	frames[i] =  love.graphics.newQuad((i-1)*64-1,0,64,64,imageW,imageH)</div><div class="line">end</div><div class="line"></div><div class="line">function Animation_update(dt)</div><div class="line">	timer = timer - dt</div><div class="line">	if timer&lt;0 then</div><div class="line">		timer = cd</div><div class="line">		index = index + 1 </div><div class="line">		if index&gt;#images then</div><div class="line">			index = 1</div><div class="line">		end</div><div class="line">	end</div><div class="line">end</div><div class="line"></div><div class="line">function Animation_draw()</div><div class="line">	love.graphics.draw(image,frames[index])</div><div class="line">end</div></pre></td></tr></table></figure></p>
<h3 id="帧动画库"><a href="#帧动画库" class="headerlink" title="帧动画库"></a>帧动画库</h3><p>常用的帧动画库anim8,它建立动画分为两个步骤，首先建立一个网格，然后通过网格建立动画，具体用法可以自行github。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">local anim8 = require &apos;anim8&apos;</div><div class="line"></div><div class="line">local image, animation</div><div class="line"></div><div class="line">function love.load()</div><div class="line">  image = love.graphics.newImage(&apos;path/to/image.png&apos;)</div><div class="line">  local g = anim8.newGrid(32, 32, image:getWidth(), image:getHeight())</div><div class="line">  animation = anim8.newAnimation(g(&apos;1-8&apos;,1), 0.1)</div><div class="line">end</div><div class="line"></div><div class="line">function love.update(dt)</div><div class="line">  animation:update(dt)</div><div class="line">end</div><div class="line"></div><div class="line">function love.draw()</div><div class="line">  animation:draw(image, 100, 200)</div><div class="line">end</div></pre></td></tr></table></figure></p>
<p>另外，笔者也自己写了一个简单的animation库，可以在笔者github上找到。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">local Animation = require &quot;animation&quot;</div><div class="line">local anim = Animation:new(img,fx,fy,w,h,offx,offy,lx,ly,delay,count)</div><div class="line">function love.update(dt)</div><div class="line">	anim:update(dt)</div><div class="line">end</div><div class="line">function love.draw()</div><div class="line">	anim:draw()</div><div class="line">end</div></pre></td></tr></table></figure></p>
<p>其中参数img为图片对象，fx,fy为含有动画的第一帧左上角位置，w,h为每个帧的尺寸，offx,offy为帧之间的间隔，lx,ly为最后一帧右下角的位置，delay为帧延迟时间，count为取这个动画中的前多少帧（可以缺省为最多）。这个库包含一些基本的回调。因为很简单，所以自己看源码就看得懂。</p>
<h2 id="声音"><a href="#声音" class="headerlink" title="声音"></a>声音</h2><p>在love2d里，声音对象是由love.audio.newSource来导入的，因为很简单下面仅举个例子。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">local music = love.audio.newSource(&quot;love.mp3&quot;)</div><div class="line">music:play()</div><div class="line">-- love.audio.play(music)</div></pre></td></tr></table></figure></p>
<p>有两点要说明，newSource的参数的第二个为类型，有两种，一种是静态一种是流式，前者比较快，但占内存，后者相反。缺省为流式。如果像类似机枪那种连续的播放某个声音的话，需要建立多个声音对象，如果仅一个的话，只能在这个声音完全播完，才能再次播放。</p>
<h2 id="编程时间"><a href="#编程时间" class="headerlink" title="编程时间"></a>编程时间</h2><p>这次我们的坦克再次升级啦，改为飞机了，现在给坦克披上飞机的皮，它就是飞机了，不过炮塔也没有了，用鼠标来操控飞机的方向。</p>
<h3 id="设计阶段"><a href="#设计阶段" class="headerlink" title="设计阶段"></a>设计阶段</h3><ol>
<li>飞机能够跟随鼠标的方向转动，并自动向前飞行，飞机有转动速度。</li>
<li>飞机能够按下按键时发射子弹。</li>
<li>飞机绑定一个动画。</li>
<li>设计一个子弹类，子弹在射出时固定角度，按固定速度移动，离开图像边界子弹销毁。</li>
<li>设计一个敌人飞机类，并绑定一个动画，敌人飞机自动发射子弹，但敌人飞机的子弹速度要慢一点。</li>
<li>敌人的初始位置为以画面为中心，半径rx = 400，ry =300的随机外围位置。并以画面中心为目标飞行。</li>
<li>敌人飞机在超过边界时，销毁并重新生成一个飞机。</li>
<li>暂时不涉及碰撞。留作作业。</li>
</ol>
<p>根据上述设计要求，我们首先确定了制作3个类，一个玩家，一个敌人，一个子弹。动画部分我们准备使用anim8库。<br>玩家跟随鼠标的算法，我们需要考虑下如何实现，敌人生成的位置还是比较简单的。</p>
<h3 id="实现阶段"><a href="#实现阶段" class="headerlink" title="实现阶段"></a>实现阶段</h3><ol>
<li>三个类的基本框架，我们在上一章已经讲过了，这里不再赘述。（实际上，敌人飞机虽然像飞机，但是它跟子弹在代码上更加相似。所以，有时候对于游戏来讲，要从一个物体的行为本质思考，而不是外面的皮肤是什么样的）</li>
<li>飞机类跟随鼠标的算法，这里简单讲解一下。先把代码贴出来，再简要的说明：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">local function getRot(x1,y1,x2,y2)</div><div class="line">	if x1==x2 and y1==y2 then return 0 end </div><div class="line">	local angle=math.atan((x2-x1)/(y2-y1))</div><div class="line">	if y1-y2&lt;0 then angle=angle-math.pi end</div><div class="line">	if angle&gt;0 then angle=angle-2*math.pi end</div><div class="line">	return -angle</div><div class="line">end</div><div class="line"></div><div class="line">local function unitAngle(angle)  --convert angle to 0,2*Pi</div><div class="line"> 	angle = angle%(2*math.pi)</div><div class="line"> 	if angle &gt; math.pi then angle = angle - 2* math.pi end</div><div class="line"> 	return angle</div><div class="line">end</div><div class="line"></div><div class="line">local tx,ty = love.mouse.getPosition()</div><div class="line">local rot = unitAngle(getRot(self.x,self.y,tx,ty)) --这里是计算方位角的一种方法。</div><div class="line">self.rot = unitAngle(self.rot)</div><div class="line">if rot&gt;self.rot and math.abs(rot - self.rot)&lt; math.pi or</div><div class="line">	 rot&lt; self.rot and  math.abs(rot - self.rot)&gt; math.pi then</div><div class="line">	self.rot = self.rot + self.dr</div><div class="line">else</div><div class="line">	self.rot = self.rot - self.dr</div><div class="line">end</div></pre></td></tr></table></figure>
</li>
</ol>
<p>首先，获取方位角的公式，上一章已经讲过了，数学方法不说了，当黑箱使用。返回的是两点间方位角。<br>第二个函数是获得单位角度，因为我们的角度不断叠加，可能不在-Pi~Pi（因为这个区间段比较容易跟0进行比较）的范围内，但是由于三角函数都是周期函数，所以从外观上没有什么影响，但是如果进行加减或比较，就要出问题了，所以要进行归一化。同样，数学方法不再解释了。<br>然后我们到判断转向部分，self.dr是飞机的转动速度，首先我们得到鼠标与飞机的方位角rot,然后跟飞机当前的角度进行比较，如果方位角大于飞机的角又小于半圈（math.pi）则右转，或者小于飞机角度，但大于半圈（这种情况实际是飞机处于正方向的两端）,否则左转。(图示我下次修订教程的时候再补).</p>
<ol>
<li>关于敌人飞机发射子弹以及子弹减速的问题。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">local b = Bullet(self)</div><div class="line">b.vx = b.vx/3</div><div class="line">b.vy = b.vy/3</div><div class="line">table.insert(game.objects,b)</div></pre></td></tr></table></figure>
</li>
</ol>
<p>在敌人发射子弹时，生成一个子弹实例，实际上跟玩家是一样的。要减速，则要改变子弹实例的速度（而非类的速度，否则所有子弹均被改变，不能改变模板），这里注意的是，直接设置speed属性是有问题的，因为后面子弹update里根本没有涉及speed而是vx,vy,所以要改变它们，让他们各自打3折即可。</p>
<ol>
<li>敌人飞机生成位置<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">local rot = love.math.random()*2*math.pi</div><div class="line">self.x = math.sin(rot)*400 + 400</div><div class="line">self.y = -math.cos(rot)*300 + 300</div><div class="line">self.rot = rot+math.pi</div></pre></td></tr></table></figure>
</li>
</ol>
<p>如何随机的在一个圈的位置上生成位置？同样是数学问题，不想多说了，代码在上面，因为rot是指向外圈的，所以用rot+pi就是反向指向内圈。（注意不是-rot，-rot的意义是沿0对称，而非反向，周期性不解释）</p>
<ol>
<li><p>关于anim8的用法<br>请自己参阅anim8的文档，这里不再赘述。</p>
</li>
<li><p>动态生成/删除飞机<br>我们之前说过了，在某个对象遍历过程中，增添或删除对象是十分危险的，因为有序表很可能排序被打乱。一般而言，有两种解决方案，我们任选。当然，如果你是无序表就无所谓了，但是也不能用insert或remove来控制，直接nil掉就可以了。<br>第一种方法，我叫做另起炉灶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">new = &#123;&#125;</div><div class="line">for i ,v in ipairs(objects)</div><div class="line">	v:update() --table.insert(new,newObj)插入到new中，而非当前</div><div class="line">	if not v.destroyed then table.insert(new,v) end</div><div class="line">end</div><div class="line">objects = new</div></pre></td></tr></table></figure>
</li>
</ol>
<p>第二种方法，是一种变通的方法。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">for i = #objects,1 ,-1 do</div><div class="line">	local go = objects[i]</div><div class="line">	go:update(dt)  -- table.insert(objects,#objects,newObj) 倒序遍历 加入时放到队尾</div><div class="line">	if go.destroyed then table.remove(objects,i) end</div><div class="line">end</div></pre></td></tr></table></figure></p>
<p>当然，还有一种方法就是不在遍历中加入，而是放到后面。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">if #objects&lt;5 then --不过这种方法比较有局限性</div><div class="line">	table.insert(objects,newObj)</div><div class="line">end</div></pre></td></tr></table></figure></p>
<p>上面介绍了本章节中比较复杂的代码，其他的东西实际上是一样的。只是代码的量增加了。</p>
<h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><ol>
<li>增加些碰撞测试吧。让敌人及其子弹对玩家有碰撞，一旦碰撞就gameover了。（使用bump库很简单啦）</li>
<li>增添一些敌人的种类，子弹的方向等。自定义速度，子弹方向，及子弹速度，颜色等。（需要稍微改一下bullet类，以便支持更多的自定义）</li>
<li>把这个游戏改编一下，变成常见的纵版弹幕的样式，即飞机随机从屏幕上方飞往下方，发射子弹。玩家鼠标控制飞机移动，方向永远对着屏幕上方。然后设计几种不同的武器类型，比如横向的，散弹的，追踪的（算法跟用鼠标控制飞机方向类似）等等。</li>
</ol>
<h2 id="本章代码"><a href="#本章代码" class="headerlink" title="本章代码"></a>本章代码</h2><figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div></pre></td><td class="code"><pre><div class="line"><span class="comment">--------------------import -------------------</span></div><div class="line">class = <span class="built_in">require</span> <span class="string">"assets/middleclass"</span></div><div class="line">anim8 = <span class="built_in">require</span> <span class="string">"assets/anim8"</span></div><div class="line"></div><div class="line"><span class="comment">---------------------objects-------------------</span></div><div class="line">Bullet = class(<span class="string">"bullet"</span>)</div><div class="line">Bullet.fireCD = <span class="number">0.1</span></div><div class="line">Bullet.radius = <span class="number">5</span></div><div class="line">Bullet.speed = <span class="number">20</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Bullet:init</span><span class="params">(parent,rot)</span></span></div><div class="line">	self.parent = parent </div><div class="line">	self.rot = self.parent.rot</div><div class="line">	self.x = self.parent.x + <span class="built_in">math</span>.sin(self.rot)*self.parent.w</div><div class="line">	self.y = self.parent.y - <span class="built_in">math</span>.cos(self.rot)*self.parent.w</div><div class="line">	self.vx = self.speed * <span class="built_in">math</span>.sin(self.rot)</div><div class="line">	self.vy = -self.speed * <span class="built_in">math</span>.cos(self.rot)</div><div class="line">	self.tag = <span class="string">"bullet"</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Bullet:update</span><span class="params">(dt)</span></span></div><div class="line">	self.x = self.x + self.vx</div><div class="line">	self.y = self.y + self.vy</div><div class="line">	<span class="keyword">if</span> self.x &gt; <span class="number">800</span> <span class="keyword">or</span> self.x&lt;<span class="number">0</span> <span class="keyword">or</span> self.y&lt;<span class="number">0</span> <span class="keyword">or</span> self.y &gt; <span class="number">600</span> <span class="keyword">then</span> <span class="comment">--边界判断</span></div><div class="line">		self.destroyed = <span class="keyword">true</span></div><div class="line">	<span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Bullet:draw</span><span class="params">()</span></span></div><div class="line">	love.graphics.setColor(<span class="number">255</span>,<span class="number">255</span>,<span class="number">0</span>,<span class="number">255</span>)</div><div class="line">	love.graphics.circle(<span class="string">"fill"</span>,self.x,self.y,self.radius)</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">local</span> Plane = class(<span class="string">"plane"</span>)</div><div class="line">Plane.speed =<span class="number">3</span></div><div class="line">Plane.size = <span class="number">1</span></div><div class="line">Plane.texture = love.graphics.newImage(<span class="string">"assets/res/1945.png"</span>)</div><div class="line">Plane.g64 = anim8.newGrid(<span class="number">64</span>,<span class="number">64</span>, <span class="number">1024</span>,<span class="number">768</span>,  <span class="number">299</span>,<span class="number">101</span>,   <span class="number">2</span>)</div><div class="line">Plane.dr = <span class="number">0.1</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Plane:init</span><span class="params">(x,y,rot)</span></span></div><div class="line">	self.x = x</div><div class="line">	self.y = y</div><div class="line">	self.rot = rot</div><div class="line">	self.fireCD = Bullet.fireCD</div><div class="line">	self.fireTimer = self.fireCD</div><div class="line">	self.anim = anim8.newAnimation(self.g64(<span class="number">1</span>,<span class="string">'1-3'</span>), <span class="number">0.1</span>)</div><div class="line">	self.w = self.size * <span class="number">32</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">getRot</span><span class="params">(x1,y1,x2,y2)</span></span></div><div class="line">	<span class="keyword">if</span> x1==x2 <span class="keyword">and</span> y1==y2 <span class="keyword">then</span> <span class="keyword">return</span> <span class="number">0</span> <span class="keyword">end</span> </div><div class="line">	<span class="keyword">local</span> angle=<span class="built_in">math</span>.atan((x2-x1)/(y2-y1))</div><div class="line">	<span class="keyword">if</span> y1-y2&lt;<span class="number">0</span> <span class="keyword">then</span> angle=angle-<span class="built_in">math</span>.pi <span class="keyword">end</span></div><div class="line">	<span class="keyword">if</span> angle&gt;<span class="number">0</span> <span class="keyword">then</span> angle=angle<span class="number">-2</span>*<span class="built_in">math</span>.pi <span class="keyword">end</span></div><div class="line">	<span class="keyword">return</span> -angle</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">unitAngle</span><span class="params">(angle)</span></span>  <span class="comment">--convert angle to 0,2*Pi</span></div><div class="line"> 	angle = angle%(<span class="number">2</span>*<span class="built_in">math</span>.pi)</div><div class="line"> 	<span class="keyword">if</span> angle &gt; <span class="built_in">math</span>.pi <span class="keyword">then</span> angle = angle - <span class="number">2</span>* <span class="built_in">math</span>.pi <span class="keyword">end</span></div><div class="line"> 	<span class="keyword">return</span> angle</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">getLoopDist</span><span class="params">(p1,p2,loop)</span></span></div><div class="line">	loop=loop <span class="keyword">or</span> <span class="number">2</span>*<span class="built_in">math</span>.pi</div><div class="line">  	<span class="keyword">local</span> dist=<span class="built_in">math</span>.abs(p1-p2)</div><div class="line">	<span class="keyword">local</span> dist2=loop-<span class="built_in">math</span>.abs(p1-p2)</div><div class="line">  	<span class="keyword">if</span> dist&gt;dist2 <span class="keyword">then</span> dist=dist2 <span class="keyword">end</span></div><div class="line">	<span class="keyword">return</span> dist</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Plane:update</span><span class="params">(dt)</span></span></div><div class="line">	self.anim:update(dt)</div><div class="line">	<span class="keyword">local</span> tx,ty = love.mouse.getPosition()</div><div class="line">	<span class="keyword">local</span> rot = unitAngle(getRot(self.x,self.y,tx,ty)) <span class="comment">--这里是计算方位角的一种方法。</span></div><div class="line">	self.rot = unitAngle(self.rot)</div><div class="line">	<span class="keyword">if</span> rot&gt;self.rot <span class="keyword">and</span> <span class="built_in">math</span>.abs(rot - self.rot)&lt; <span class="built_in">math</span>.pi <span class="keyword">or</span></div><div class="line">		 rot&lt; self.rot <span class="keyword">and</span>  <span class="built_in">math</span>.abs(rot - self.rot)&gt; <span class="built_in">math</span>.pi <span class="keyword">then</span></div><div class="line">		self.rot = self.rot + self.dr</div><div class="line">	<span class="keyword">else</span></div><div class="line">		self.rot = self.rot - self.dr</div><div class="line">	<span class="keyword">end</span></div><div class="line">	self.fireTimer = self.fireTimer - dt <span class="comment">--这里的开火计时器是十分常用的一种方法，需要学会</span></div><div class="line"></div><div class="line">	<span class="keyword">if</span> love.mouse.isDown(<span class="number">1</span>) <span class="keyword">and</span> self.fireTimer &lt; <span class="number">0</span> <span class="keyword">then</span></div><div class="line">		self.fireTimer = self.fireCD</div><div class="line">		<span class="built_in">table</span>.insert(game.objects,Bullet(self))</div><div class="line">	<span class="keyword">end</span></div><div class="line">	self.x = self.x + self.speed*<span class="built_in">math</span>.sin(self.rot)</div><div class="line">	self.y = self.y - self.speed*<span class="built_in">math</span>.cos(self.rot)</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Plane:draw</span><span class="params">()</span></span></div><div class="line">	love.graphics.setColor(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>)</div><div class="line">	self.anim:draw(self.texture,self.x,self.y,self.rot,self.size,self.size,<span class="number">32</span>,<span class="number">32</span>)</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">local</span> Enemy = class(<span class="string">"Enemy"</span>)</div><div class="line">Enemy.speed =<span class="number">3</span></div><div class="line">Enemy.size = <span class="number">1</span></div><div class="line">Enemy.texture = Plane.texture</div><div class="line">Enemy.g64 = Plane.g64</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Enemy:init</span><span class="params">()</span></span></div><div class="line">	<span class="keyword">local</span> rot = love.<span class="built_in">math</span>.random()*<span class="number">2</span>*<span class="built_in">math</span>.pi</div><div class="line">	self.x = <span class="built_in">math</span>.sin(rot)*<span class="number">400</span> + <span class="number">400</span></div><div class="line">	self.y = <span class="built_in">math</span>.cos(rot)*<span class="number">300</span> + <span class="number">300</span></div><div class="line">	self.rot = -rot</div><div class="line">	self.fireCD = <span class="number">0.5</span></div><div class="line">	self.fireTimer = self.fireCD</div><div class="line">	self.anim = anim8.newAnimation(self.g64(<span class="string">'2-4'</span>,<span class="number">3</span>), <span class="number">0.1</span>)</div><div class="line">	self.w = self.size * <span class="number">32</span></div><div class="line">	self.tag = <span class="string">"enemy"</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Enemy:update</span><span class="params">(dt)</span></span></div><div class="line">	self.x = self.x + self.speed*<span class="built_in">math</span>.sin(self.rot)</div><div class="line">	self.y = self.y - self.speed*<span class="built_in">math</span>.cos(self.rot)</div><div class="line"></div><div class="line">	self.fireTimer = self.fireTimer - dt <span class="comment">--这里的开火计时器是十分常用的一种方法，需要学会</span></div><div class="line"></div><div class="line">	<span class="keyword">if</span> self.fireTimer &lt; <span class="number">0</span> <span class="keyword">then</span></div><div class="line">		self.fireTimer = self.fireCD</div><div class="line">		<span class="keyword">local</span> b = Bullet(self)</div><div class="line">		b.vx = b.vx/<span class="number">3</span></div><div class="line">		b.vy = b.vy/<span class="number">3</span></div><div class="line">		<span class="built_in">table</span>.insert(game.objects,b)</div><div class="line">	<span class="keyword">end</span></div><div class="line"></div><div class="line">	<span class="keyword">if</span> self.x &gt; <span class="number">800</span> <span class="keyword">or</span> self.x&lt;<span class="number">0</span> <span class="keyword">or</span> self.y&lt;<span class="number">0</span> <span class="keyword">or</span> self.y &gt; <span class="number">600</span> <span class="keyword">then</span> <span class="comment">--边界判断</span></div><div class="line">		self.destroyed = <span class="keyword">true</span></div><div class="line">	<span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Enemy:draw</span><span class="params">()</span></span></div><div class="line">	love.graphics.setColor(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>)</div><div class="line">	self.anim:draw(self.texture,self.x,self.y,self.rot,self.size,self.size,<span class="number">32</span>,<span class="number">32</span>)</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"></div><div class="line">game = &#123;&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.load</span><span class="params">()</span></span></div><div class="line">	love.graphics.setBackgroundColor(<span class="number">100</span>, <span class="number">100</span>, <span class="number">200</span>, <span class="number">255</span>)</div><div class="line">	game.objects = &#123;&#125;</div><div class="line">	game.enemies = &#123;&#125;</div><div class="line">	game.plane = Plane(<span class="number">400</span>,<span class="number">300</span>,<span class="number">0</span>)</div><div class="line">	<span class="keyword">for</span> i = <span class="number">1</span>, <span class="number">5</span> <span class="keyword">do</span></div><div class="line">		<span class="built_in">table</span>.insert(game.enemies,Enemy())</div><div class="line">	<span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.update</span><span class="params">(dt)</span></span></div><div class="line">	game.plane:update(dt)</div><div class="line">	<span class="keyword">for</span> i = #game.objects,<span class="number">1</span> ,<span class="number">-1</span> <span class="keyword">do</span></div><div class="line">		<span class="keyword">local</span> go = game.objects[i]</div><div class="line">		go:update(dt)</div><div class="line">		<span class="keyword">if</span> go.destroyed <span class="keyword">then</span> <span class="built_in">table</span>.remove(game.objects,i) <span class="keyword">end</span></div><div class="line">	<span class="keyword">end</span></div><div class="line">	<span class="keyword">for</span> i = #game.enemies,<span class="number">1</span> ,<span class="number">-1</span> <span class="keyword">do</span></div><div class="line">		<span class="keyword">local</span> go = game.enemies[i]</div><div class="line">		go:update(dt)</div><div class="line">		<span class="keyword">if</span> go.destroyed <span class="keyword">then</span> <span class="built_in">table</span>.remove(game.enemies,i) <span class="keyword">end</span></div><div class="line">	<span class="keyword">end</span></div><div class="line">	<span class="keyword">if</span> #game.enemies&lt;<span class="number">5</span> <span class="keyword">then</span></div><div class="line">		<span class="built_in">table</span>.insert(game.enemies,Enemy())</div><div class="line">	<span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.draw</span><span class="params">()</span></span></div><div class="line">	game.plane:draw()</div><div class="line">	<span class="keyword">for</span> i,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(game.objects) <span class="keyword">do</span></div><div class="line">		v:draw()</div><div class="line">	<span class="keyword">end</span></div><div class="line">	<span class="keyword">for</span> i,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(game.enemies) <span class="keyword">do</span></div><div class="line">		v:draw()</div><div class="line">	<span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div></pre></td></tr></table></figure>
    </div>

    

    

    <!-- Comments -->
    
    <div class="comments">
        
<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="love2d" data-title="love2d" data-url="alexarjing.github.io"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"love2d"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->




    </div>
    

</div>
        </section>

    </div>
</div>

</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>关于</h2>
                <p>
                    本教程配套软件:<a href="https://alexarjing.github.io/tutorial.love">tutorial.love</a>. 请安装love环境使用。
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>最近发表</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2016/12/06/chapter10/">第10章 高级绘图（II）—— Mesh, Can</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2016/12/05/chapter9/">第9章 高级绘图（I）——Scissor，Sten</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2016/12/05/chapter8/">第8章 用户界面</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2016/12/05/interlude/">插曲：你的独立游戏生涯</a>
            </li>
            
        </ul>
    </div>



            
<div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 footer-categories">
    <h2>分类</h2>
    <ul>
        
        <li>
            <a class="footer-post" href="/categories/中级教程/">中级教程</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/初级教程/">初级教程</a>
        </li>
        
    </ul>
</div>

        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a href="https://github.com/klugjo/hexo-theme-alpha-dust">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://twitter.com/?lang=en">
                            <span class="footer-icon-container">
                                <i class="fa fa-twitter"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.facebook.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-facebook"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.instagram.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-instagram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://dribbble.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-dribbble"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://plus.google.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-google-plus"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.behance.net/">
                            <span class="footer-icon-container">
                                <i class="fa fa-behance"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://500px.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-500px"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:alexar@foxmail.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    本文作者Alexar alexar@foxmail.com; 原创内容禁止转载。作者保留一切权利。
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Disqus Comments -->





</body>

</html>